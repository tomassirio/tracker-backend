databaseChangeLog:
  - changeSet:
      id: 005-update-trips-locations-to-references
      author: tomassirio
      changes:
        # Drop the old string-based location columns
        - dropColumn:
            tableName: trips
            columnName: starting_location
        - dropColumn:
            tableName: trips
            columnName: ending_location

        # Add foreign key columns for location references
        - addColumn:
            tableName: trips
            columns:
              - column:
                  name: starting_location_id
                  type: uuid
                  constraints:
                    foreignKeyName: fk_trips_starting_location
                    references: locations(id)
                    nullable: true
              - column:
                  name: ending_location_id
                  type: uuid
                  constraints:
                    foreignKeyName: fk_trips_ending_location
                    references: locations(id)
                    nullable: true

