replicaCount: 1

# Environment configuration
environment:
  name: "prod"  # dev or prod
  suffix: ""    # "-dev" for dev environment, "" for prod

image:
  repository: ghcr.io/tomassirio/tracker-query
  pullPolicy: IfNotPresent
  tag: "latest"

service:
  type: ClusterIP
  port: 8082       # Service port (same for dev and prod)
  targetPort: 8082 # Container port

# Ingress configuration for external access
ingress:
  enabled: false   # Disabled by default - controlled by deployment workflow
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/cors-allow-origin: "*"
    nginx.ingress.kubernetes.io/cors-allow-methods: "GET, POST, PUT, DELETE, OPTIONS"
    nginx.ingress.kubernetes.io/cors-allow-headers: "Authorization, Content-Type"
    nginx.ingress.kubernetes.io/enable-cors: "true"
  hosts:
    - host: query.localwanderer.com  # Will be overridden by workflow
      paths:
        - path: /
          pathType: Prefix
  tls: []
    # - secretName: tracker-query-tls
    #   hosts:
    #     - query.localwanderer.com

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

# Application configuration
application:
  name: "tracker-query"
  serverPort: 8082
  projectVersion: "0.3.7"
  
  # CORS Configuration
  cors:
    allowedOrigins: "http://localhost:51538,http://localhost:3000"

  # JWT Configuration
  jwt:
    secret: "0123456789ABCDEF0123456789ABCDEF"
  
  # Logging
  logging:
    level:
      command: INFO
      root: WARN
  
  # Management endpoints
  management:
    endpoints:
      web:
        basePath: "/actuator"
        exposure:
          include: "health,info"
    endpoint:
      health:
        showDetails: "always"
  
  # Database Configuration
  database:
    url: "jdbc:postgresql://postgres-dev:5432/wanderer_db"
    username: "wanderer"
    password: "password"
    driverClassName: "org.postgresql.Driver"
  
  # JPA/Hibernate
  jpa:
    hibernateDdlAuto: "validate"
  
  # Liquibase
  liquibase:
    changeLog: "classpath:db/changelog/db.changelog-master.yaml"

# Pod Storage
volumeClaimTemplates:
  enabled: false
  storage: 1Gi
  storageClassName: standard
