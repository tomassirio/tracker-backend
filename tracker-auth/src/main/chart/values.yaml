replicaCount: 1

# Environment configuration
environment:
  name: "prod"  # dev or prod
  suffix: ""    # "-dev" for dev environment, "" for prod

image:
  repository: ghcr.io/tomassirio/tracker-auth
  pullPolicy: IfNotPresent
  tag: "latest"

service:
  type: ClusterIP
  port: 8083       # Service port (same for dev and prod)
  targetPort: 8083 # Container port

# Ingress configuration for external access
ingress:
  enabled: true    # Enabled for both dev and prod
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/cors-allow-origin: "*"
    nginx.ingress.kubernetes.io/cors-allow-methods: "GET, POST, PUT, DELETE, OPTIONS"
    nginx.ingress.kubernetes.io/cors-allow-headers: "Authorization, Content-Type"
    nginx.ingress.kubernetes.io/enable-cors: "true"
  hosts:
    - host: auth.localwanderer.com  # Will be overridden by workflow
      paths:
        - path: /
          pathType: Prefix
  tls: []
    # - secretName: tracker-auth-tls
    #   hosts:
    #     - auth.localwanderer.com

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi
# Application configuration
application:
  serverPort: 8083
  projectVersion: "0.3.7"
  
  # JWT Configuration
  jwt:
    secret: "0123456789ABCDEF0123456789ABCDEF"
    expirationMs: 900000
  
  # Database Configuration
  database:
    url: "jdbc:postgresql://postgres:5432/wanderer_auth_db"
    username: "wanderer_auth"
    password: "password"
    driverClassName: "org.postgresql.Driver"
  
  # Liquibase
  liquibase:
    enabled: true
    changeLog: "classpath:db/changelog/db.changelog-master.yaml"
  
  # JPA/Hibernate
  jpa:
    hibernateDdlAuto: "none"
  
  # Tracker service URLs (will be set by helm deploy with environment suffix)
  trackerCommandUrl: "http://tracker-command:8081"
  trackerQueryUrl: "http://tracker-query:8082"

  # Spring Cloud
  springCloud:
    compatibilityVerifierEnabled: false
# Pod Storage
volumeClaimTemplates:
  enabled: false
  storage: 1Gi
  storageClassName: standard
